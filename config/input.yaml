# Shaka Player History Live Stream
#
# Copyright 2024 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Shaka Streamer input config file.

inputs:
  # Our input video stream, generated by Gource.
  - input_type: external_command

    # Basic metadata, needed when there's no file to ffprobe.
    media_type: video
    frame_rate: 25
    resolution: 720p

    # The actual command that generates the input stream.
    name: bash scripts/gource.sh $SHAKA_STREAMER_EXTERNAL_COMMAND_OUTPUT

    # Treat the input as a pipe of 25fps images, and limit throughput to 1x.
    extra_input_args: "-f image2pipe -framerate 25 -re"

    filters:
      # Pad the 1240x680 input frames up to standard 720p.
      # This helps keep the content visible on TVs with overscan.
      - pad=1280:720:20:20

  # Our input audio stream, which is a pre-generated audio file we loop.
  - input_type: looped_file
    name: intermediate/audio_loop.mp4
    media_type: audio
